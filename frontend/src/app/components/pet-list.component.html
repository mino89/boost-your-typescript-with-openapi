<div class="container">
  <header>
    <h2>Pet Management System</h2>
    <p>Angular 20 + OpenAPI TypeScript Demo</p>
  </header>

  <!-- Add Pet Form -->
  <div class="form-section">
    <h3>{{ editingPet() ? 'Edit Pet' : 'Add New Pet' }}</h3>
    <form (ngSubmit)="onSubmit()" #petForm="ngForm">
      <div class="form-group">
        <label for="name">Name:</label>
        <input id="name" type="text" [(ngModel)]="newPet().name" name="name" required />
      </div>

      <div class="form-group">
        <label for="species">Species:</label>
        <input id="species" type="text" [(ngModel)]="newPet().species" name="species" required />
      </div>

      <div class="form-group">
        <label for="age">Age:</label>
        <input id="age" type="number" [(ngModel)]="newPet().age" name="age" required />
      </div>

      <div class="form-group">
        <label for="description">Description:</label>
        <textarea id="description" [(ngModel)]="newPet().description" name="description"></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="!petForm.valid || loading()">
          {{ editingPet() ? 'Update Pet' : 'Add Pet' }}
        </button>
        @if (editingPet()) {
        <button type="button" (click)="cancelEdit()">Cancel</button>
        }
      </div>
    </form>
  </div>

  <!-- Loading State -->
  @if (loading()) {
  <div class="loading">Loading pets...</div>
  }

  <!-- Error State -->
  @if (error()) {
  <div class="error">Error: {{ error() }}</div>
  }

  <!-- Pet List -->
  @if (!loading() && pets().length > 0) {
  <div class="pets-section">
    <h3>Your Pets</h3>
    <div class="pets-grid">
      @for (pet of pets(); track pet.id) {
      <div class="pet-card">
        <h4>{{ pet.name }}</h4>
        <p><strong>Species:</strong> {{ pet.species }}</p>
        <p><strong>Age:</strong> {{ pet.age }} years</p>
        @if (pet.description) {
        <p><strong>Description:</strong> {{ pet.description }}</p>
        }
        <div class="card-actions">
          <button (click)="startEdit(pet)">Edit</button>
          <button (click)="deletePet(pet.id)" class="delete">Delete</button>
        </div>
      </div>
      }
    </div>
  </div>
  } @if (!loading() && pets().length === 0) {
  <div class="empty-state">
    <p>No pets found. Add your first pet above!</p>
  </div>
  }
</div>
